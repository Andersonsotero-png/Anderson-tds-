<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Parquinho App - Terra do Sol</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="css/style.css" />

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>

<header>
  <div class="brand">
    <img src="assets/icons/icon-512.png" />
    <h1>Parquinho App - Terra do Sol</h1>
  </div>
  <nav>
    <button data-tab="cadastro" class="active">Cadastro</button>
    <button data-tab="busca">Busca</button>
    <button data-tab="historico">Histórico</button>
    <button data-tab="marketing">Marketing</button>
    <button data-tab="impressao">Impressão</button>
  </nav>
</header>

<main>

<!-- ================= CADASTRO ================= -->
<section id="cadastro" class="tab active">

<form id="formCadastro">

  <label>Nome completo (criança):
    <input id="nomeCrianca" required />
  </label>

  <label>Responsável:
    <input id="responsavel" />
  </label>

  <label>Contato:
    <input id="contato" />
  </label>

  <label>Observações:
    <textarea id="obs"></textarea>
  </label>

  <!-- NOVO CAMPO: INTEIRA / MEIA / CORTESIA -->
  <label>Tipo de ingresso:
    <select id="tpIngresso">
      <option value="inteira">Inteira – R$ 35,90</option>
      <option value="meia">Meia – R$ 17,95</option>
      <option value="cortesia">Cortesia – R$ 0,00</option>
    </select>
  </label>

  <!-- Se MEIA, aparecem as opções -->
  <label id="boxMeia" style="display:none">
    Categoria da meia:
    <select id="catMeia">
      <option value="pcd">PCD</option>
      <option value="tea">TEA</option>
      <option value="down">Down</option>
    </select>
  </label>

  <div class="row">
    <button type="button" id="btnCadastrar">Cadastrar</button>
    <button type="button" id="btnGerarTodosQR">Gerar QR de todos</button>
  </div>

</form>

<div id="qrCodeCadastro" class="card"></div>

<hr>

<div id="cameraControls" class="card">
  <h3>Leitor de QR</h3>

  <div class="row">
    <button id="btnStartCamera">Abrir câmera</button>
    <button id="btnStopCamera" disabled>Fechar câmera</button>
    <button id="btnScanNow" disabled>Registrar Entrada/Saída</button>
    <button id="btnRegistrarManual">Registrar Manual</button>
  </div>

  <video id="video" autoplay playsinline></video>
  <canvas id="scanCanvas" hidden></canvas>
</div>

</section>

<!-- ================= BUSCA ================= -->
<section id="busca" class="tab">
  <input id="inputBusca" placeholder="Buscar..." oninput="buscarCadastro()">
  <ul id="listaBusca"></ul>
</section>

<!-- ================= HISTORICO ================= -->
<section id="historico" class="tab">
  <h2>Histórico</h2>
  <div id="listaHistoricoContainer"></div>
  <button onclick="exportarExcel()">Exportar Excel</button>
</section>

<!-- ================= MARKETING ================= -->
<section id="marketing" class="tab">
  <h2>Marketing</h2>
  <textarea id="marketingMessage"></textarea>
  <input type="file" id="marketingImage">
</section>

<!-- ================= IMPRESSÃO ================= -->
<section id="impressao" class="tab">
  <h2>Impressão</h2>

  <div class="row" style="margin-bottom:10px">
    <button id="btnImprimirFiltro">Gerar relatório</button>
    <button id="btnVoltarImpressao">Voltar</button>
  </div>

  <div id="relatorioPreview" class="card"></div>
</section>

</main>

<script src="js/script.js"></script>
</body>
</html>
