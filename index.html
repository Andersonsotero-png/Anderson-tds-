<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>Parquinho App - Terra do Sol</title>

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- CSS -->
  <link rel="stylesheet" href="css/style.css" />

  <!-- Bibliotecas -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>

<body>

<header>
  <div class="brand">
    <img alt="logo" id="appLogo" src="assets/icons/icon-512.png" />
    <h1>Parquinho App - Terra do Sol</h1>
  </div>

  <nav>
    <button data-tab="cadastro" class="active">Cadastro</button>
    <button data-tab="busca">Busca</button>
    <button data-tab="historico">Histórico</button>
    <button data-tab="marketing">Marketing</button>
    <button data-tab="impressao">Impressão</button>
  </nav>
</header>

<main>

  <!-- CADASTRO -->
  <section id="cadastro" class="tab active">

    <form id="formCadastro" autocomplete="off">

      <!-- NOVA PRIMEIRA ABA – VALORES -->
      <div class="card" style="margin-bottom:14px;">
        <h3>Tipo de Pulseira</h3>

        <label>
          <select name="tipoPulseira" required id="tipoPulseira">
            <option value="">Selecione...</option>
            <option value="inteira">Inteira – R$ 35,90</option>
            <option value="meia">Meia – R$ 17,95</option>
            <option value="cortesia">Cortesia</option>
          </select>
        </label>

        <!-- Motivo de meia -->
        <label id="motivoMeiaLabel" style="display:none;">
          Motivo da meia:
          <select name="motivoMeia">
            <option value="">Selecione...</option>
            <option value="pcd">PCD</option>
            <option value="tea">TEA</option>
            <option value="down">Down</option>
          </select>
        </label>
      </div>

      <label>Nome completo (criança):
        <input type="text" name="nome" required />
      </label>

      <label>Data de nascimento:
        <input type="date" name="dataNascimento" required />
      </label>

      <label>Idade:
        <input type="number" name="idade" readonly />
      </label>

      <label>Nome do responsável:
        <input type="text" name="responsavel" />
      </label>

      <label>Telefone:
        <input type="tel" name="telefone" placeholder="+55..." />
      </label>

      <label>Email:
        <input type="email" name="email" />
      </label>

      <label>Setor:
        <select name="setor">
          <option value="salão">Salão</option>
          <option value="coqueiro">Coqueiro</option>
          <option value="guarda-sol">Guarda-sol</option>
        </select>
      </label>

      <label>Mesa:
        <input type="text" name="mesa" />
      </label>

      <label>Possui alergia?
        <select name="temAlergia" id="temAlergia">
          <option value="nao">Não</option>
          <option value="sim">Sim</option>
        </select>
      </label>

      <label id="alergiaLabel" style="display:none">
        Qual alergia?
        <input type="text" name="qualAlergia" />
      </label>

      <label>Altura:
        <select name="altura" id="alturaSelect">
          <option value="menor">Menor que 1m</option>
          <option value="maior">Maior que 1m</option>
        </select>
      </label>

      <label>Sai sozinho?
        <select name="saiSozinho" id="saiSozinhoSelect">
          <option value="nao">Não</option>
          <option value="sim">Sim</option>
        </select>
      </label>

      <div style="margin-top:8px">
        <span id="liveBadge" class="badge red">NÃO SAI SOZINHO</span>
      </div>

      <label>Observações:
        <textarea name="observacoes"></textarea>
      </label>

      <div class="row">
        <button type="submit">Cadastrar</button>
        <button type="button" id="btnGerarTodosQR">Gerar QR de todos</button>
      </div>
    </form>

    <div id="resultCadastro" class="card">
      <h3>Último QR gerado</h3>
      <div id="qrCodeCadastro"></div>
      <div class="row">
        <button id="btnDownloadQR">Baixar QR</button>
        <button id="btnPrintLabel">Imprimir etiqueta</button>
      </div>
    </div>

    <hr />

    <div id="cameraControls" class="card">
      <h3>Leitor de QR</h3>
      <div class="row">
        <button id="btnStartCamera">Abrir câmera</button>
        <button id="btnStopCamera" disabled>Fechar câmera</button>
        <button id="btnScanNow" disabled>Registrar Entrada/Saída</button>
        <button id="btnRegistrarManual">Registrar Manual</button>
      </div>

      <div id="videoWrap">
        <video id="video" autoplay playsinline></video>
        <canvas id="scanCanvas" hidden></canvas>
      </div>

      <div id="scanMessage" style="margin-top:8px"></div>
    </div>

  </section>

  <!-- BUSCA -->
  <section id="busca" class="tab">
    <input type="text" id="inputBusca" placeholder="Buscar..." />
    <ul id="listaBusca"></ul>
  </section>

  <!-- HISTÓRICO -->
  <section id="historico" class="tab">

    <h2>Histórico</h2>

    <div class="card">
      <div class="row">
        <label>Início: <input type="date" id="histFrom"></label>
        <label>Fim: <input type="date" id="histTo"></label>
        <button id="btnFiltrarHistorico">Filtrar</button>
      </div>
    </div>

    <div id="listaHistoricoContainer"></div>

    <div class="row">
      <button id="btnExportJSON">Exportar Excel</button>
      <button id="btnLimparTudo">Limpar Tudo</button>
    </div>

  </section>

  <!-- MARKETING -->
  <section id="marketing" class="tab">

    <h2>Marketing</h2>

    <div class="card">
      <h4>Mensagem</h4>
      <textarea id="marketingMessage"></textarea>

      <label>Imagem:
        <input type="file" id="marketingImage" accept="image/*" />
      </label>

      <div class="row">
        <button id="btnSelectAll">Selecionar Todos</button>
        <button id="btnClearAll">Limpar</button>
        <button id="btnSendToSelected">Enviar</button>
      </div>
    </div>

    <div class="card" id="marketingListWrapper">
      <h4>Lista</h4>
      <div id="marketingList"></div>
    </div>

  </section>

  <!-- IMPRESSÃO -->
  <section id="impressao" class="tab">

    <h2>Impressão</h2>

    <div class="card">

      <div class="row">
        <label>Filtro:
          <select id="quickFilter">
            <option value="hoje">Hoje</option>
            <option value="ontem">Ontem</option>
            <option value="ult7">Últimos 7 dias</option>
            <option value="mesAtual">Mês atual</option>
            <option value="intervalo">Intervalo</option>
          </select>
        </label>

        <label>Início: <input type="date" id="filterFrom"></label>
        <label>Fim: <input type="date" id="filterTo"></label>

        <button id="btnFiltrar">Filtrar</button>
        <button id="btnImprimirFiltro">Imprimir</button>
        <button id="btnVoltarImpressao">Voltar</button>
      </div>

    </div>

    <!-- Área de demandas / ocorrências -->
    <div class="card">
      <h3>Demandas / Ocorrências do Dia</h3>
      <textarea id="textoDemandas" placeholder="Ex: brinquedo parado, manutenção, observações do dia..."></textarea>
    </div>

    <div id="relatorioPreview" class="card"></div>

  </section>

</main>

<script src="js/script.js"></script>

</body>
</html>
